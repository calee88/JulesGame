#!/bin/bash
# Auto-update version in index.html when game.js changes

INDEX_FILE="android/app/src/main/assets/www/index.html"
GAME_FILE="android/app/src/main/assets/www/game.js"

# Check if game.js is being committed
if git diff --cached --name-only | grep -q "^${GAME_FILE}$"; then
    echo "ðŸ”„ game.js changed, updating version in index.html..."

    # Generate new version (timestamp in seconds)
    NEW_VERSION=$(date +%s)

    # Update version in index.html
    sed -i "s/game\.js?v=[0-9]*/game.js?v=${NEW_VERSION}/" "$INDEX_FILE"

    # Stage the updated index.html
    git add "$INDEX_FILE"

    echo "âœ… Updated version to: $NEW_VERSION"
fi
